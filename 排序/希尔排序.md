# 希尔排序

#### 【基本思想】

基本有序：接近正序，例如{1，2，8，4，5，6，7，3，9}

局部有序：部分有序，例如{6，7，8，9，1，2，3，4，5}

局部有序不能提高直接插入排序算法的时间性能，但一个序列若为基本有序，那么排序的时间性能会提高。

希尔排序利用上述思想，先将整个待排记录序列分割成若干个子序列分别进行直接插入排序，待整个序列的记录基本有序时，在对全体记录进行一次插入排序。

但子序列的构成不能是简单的逐段分割，而是将相距某个增量的记录组成一个子序列。例如，如下描述：

希尔排序有两个问题需要解决：

1、增量应如何提取？

$d_1 = n/2$  $d_{i+1}=d_i/2$

2、子序列如何进行直接插入排序

在插入记录r[i] 时，自r[i-d] 起往前跳跃式（跳跃幅度为d）搜索待插入位置，并且r[0]只是暂存单元，不是哨兵。当搜索位置为<0， 表示插入位置已经找到了。在搜索过程中，记录后移也是跳跃d个位置。在整个序列中，qiand个记录分别是d个子序列中的第一个记录，所以从第d+1个记录开始进行插入。

#### 【代码】

```c++
for(i=d+1;i<=n;i++){
	r[0]=r[i];
	j=i-d;
	while(j>0&&r[0]<r[j]){
		r[j+d]=r[j];
		j=j-d;
	}
	r[j+d]=r[0]
} 
```

#### 【时间性能】

希尔排序开始增量比较大，每个子序列中的记录个数较少，从而排序速度快；当增量较小时，虽然每个子序列中记录个数较多，但整个序列已基本 有序，排序速度较快。

平均时间复杂度为：O($n^{1.3}$)

